<!DOCTYPE html>

<html lang="en">

<head>
    
    <title>只需要一个函数就可以完成页面所有的请求？ - Peter&#39;s blog</title>
    <meta charset="UTF-8">
    <meta name="keywords" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">
    
    

    <link rel="shortcut icon" href="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fc-ssl.duitang.com%2Fuploads%2Fblog%2F202103%2F30%2F20210330141929_161cb.thumb.1000_0.jpeg&amp;refer=http%3A%2F%2Fc-ssl.duitang.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=auto?sec=1652842290&amp;t=527c7920901fdf8db3af9cc4edc5b273" type="" />
    <meta name="description" content="介绍 当你还在为交互函数在项目的各种地方不好维护而烦恼的时候，有没有想过只用一个函数就可以实现对本页面所有请求的执行或绑定。 本项目就旨在实现只写些配置就可以实现所有的交互。 Quick Start 1.下载代码 $ git clone https:&#x2F;&#x2F;gitee.com&#x2F;pw-1&#x2F;request-all.git 2.引入文件 import request">
<meta property="og:type" content="article">
<meta property="og:title" content="只需要一个函数就可以完成页面所有的请求？">
<meta property="og:url" content="http://pe-2.github.io/2022/04/20/requestAll-md/index.html">
<meta property="og:site_name" content="Peter&#39;s blog">
<meta property="og:description" content="介绍 当你还在为交互函数在项目的各种地方不好维护而烦恼的时候，有没有想过只用一个函数就可以实现对本页面所有请求的执行或绑定。 本项目就旨在实现只写些配置就可以实现所有的交互。 Quick Start 1.下载代码 $ git clone https:&#x2F;&#x2F;gitee.com&#x2F;pw-1&#x2F;request-all.git 2.引入文件 import request">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2022-04-20T07:21:31.000Z">
<meta property="article:modified_time" content="2022-04-20T09:26:06.605Z">
<meta property="article:author" content="Peter">
<meta property="article:tag" content="ajax">
<meta name="twitter:card" content="summary">
    <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css"
    />
    <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"
    />
    
    <link rel="stylesheet" href="/lib/mdui_043tiny/css/mdui.css?v=1650446891731">
    <link rel="stylesheet" href="/lib/iconfont/iconfont.css?v=1650446891731">
    <link rel="stylesheet" href="/css/style.css?v=1650446891731">
    
        <link rel="stylesheet" href="/css/dark.css?v=1650446891731">
     
    
<meta name="generator" content="Hexo 5.4.2"></head>

<body class="mdui-drawer-body-left">
    
    <div id="nexmoe-background">
        <div class="nexmoe-bg" style="background-image: url(https://cdn.jsdelivr.net/gh/nexmoe/nexmoe.github.io@latest/images/cover/5c3aec85a4343.jpg)"></div>
        <div class="mdui-appbar mdui-shadow-0">
            <div class="mdui-toolbar">
                <a mdui-drawer="{target: '#drawer', swipe: true}" title="menu" class="mdui-btn mdui-btn-icon mdui-ripple"><i class="mdui-icon nexmoefont icon-menu"></i></a>
                <div class="mdui-toolbar-spacer"></div>
                <!--<a href="javascript:;" class="mdui-btn mdui-btn-icon"><i class="mdui-icon material-icons">search</i></a>-->
                <a href="/" title="Peter" class="mdui-btn mdui-btn-icon"><img src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fc-ssl.duitang.com%2Fuploads%2Fblog%2F202103%2F30%2F20210330141929_161cb.thumb.1000_0.jpeg&amp;refer=http%3A%2F%2Fc-ssl.duitang.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=auto?sec=1652842290&amp;t=527c7920901fdf8db3af9cc4edc5b273" alt="Peter"></a>
            </div>
        </div>
    </div>
    <div id="nexmoe-header">
        <div class="nexmoe-drawer mdui-drawer" id="drawer">
    <div class="nexmoe-avatar mdui-ripple">
        <a href="/" title="Peter">
            <img src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fc-ssl.duitang.com%2Fuploads%2Fblog%2F202103%2F30%2F20210330141929_161cb.thumb.1000_0.jpeg&amp;refer=http%3A%2F%2Fc-ssl.duitang.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=auto?sec=1652842290&amp;t=527c7920901fdf8db3af9cc4edc5b273" alt="Peter" alt="Peter">
        </a>
    </div>
    <div class="nexmoe-count">
        <div><span>Articles</span>2</div>
        <div><span>Tags</span>3</div>
        <div><span>Categories</span>0</div>
    </div>
    <div class="nexmoe-list mdui-list" mdui-collapse="{accordion: true}">
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/" title="回到首页">
            <i class="mdui-list-item-icon nexmoefont icon-home"></i>
            <div class="mdui-list-item-content">
                回到首页
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/archives.html" title="文章归档">
            <i class="mdui-list-item-icon nexmoefont icon-container"></i>
            <div class="mdui-list-item-content">
                文章归档
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/about.html" title="关于博主">
            <i class="mdui-list-item-icon nexmoefont icon-info-circle"></i>
            <div class="mdui-list-item-content">
                关于博主
            </div>
        </a>
        
    </div>
    <aside id="nexmoe-sidebar">
    
    <div class="nexmoe-widget-wrap">
    <div class="nexmoe-widget nexmoe-search">
        
            <form id="search_form">
                <label><input class="st-default-search-input" id="search_value" name="q" type="search" placeholder="Search" style="
                    font-size: 15px !important;
                    height: 56px !important;
                    background-image: none;
                "></label>
            </form>
         
    </div>
</div>
    
    <div class="nexmoe-widget-wrap">
    <div class="nexmoe-widget nexmoe-social">
        <a class="mdui-ripple" href="/qq.html" target="_blank" mdui-tooltip="{content: 'QQ'}" style="color: rgb(249, 174, 8);background-color: rgba(249, 174, 8, .1);">
            <i class="nexmoefont icon-QQ"></i>
        </a><a class="mdui-ripple" href="https://space.bilibili.com/524303953" target="_blank" mdui-tooltip="{content: '哔哩哔哩'}" style="color: rgb(231, 106, 141);background-color: rgba(231, 106, 141, .15);">
            <i class="nexmoefont icon-bilibili"></i>
        </a><a class="mdui-ripple" href="https://github.com/pe-2/" target="_blank" mdui-tooltip="{content: 'GitHub'}" style="color: rgb(250, 230, 230);background-color: rgba(250, 23, 230, .15);">
            <i class="nexmoefont icon-github"></i>
        </a><a class="mdui-ripple" href="/guoxiaodong167@gamil.com" target="_blank" mdui-tooltip="{content: 'Gmail'}" style="color: rgb(46, 86, 46);background-color: rgba(46, 86, 46, .15);">
            <i class="nexmoefont icon-mail-fill"></i>
        </a><a class="mdui-ripple" href="/wechat.html" target="_blank" mdui-tooltip="{content: 'Wechat'}" style="color: rgb(100,200,230);background-color: rgba(100,200,230,.15);">
            <i class="nexmoefont icon-wechat-fill"></i>
        </a>
    </div>
</div>
    
    

    
    
  <div class="nexmoe-widget-wrap">
    <div id="randomtagcloud" class="nexmoe-widget tagcloud nexmoe-rainbow">
      <a href="/tags/ajax/" style="font-size: 10px;">ajax</a> <a href="/tags/first/" style="font-size: 10px;">first</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a>
    </div>
    
  </div>

    
    
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">Archive</h3>
    <div class="nexmoe-widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/">2022</a><span class="archive-list-count">2</span></li></ul>
    </div>
  </div>



    
</aside>
    <div class="nexmoe-copyright">
        &copy; 2022 Peter
        Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
        & <a href="https://github.com/theme-nexmoe/hexo-theme-nexmoe" target="_blank">Nexmoe</a>
        <br><a target="_blank" href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral"><img src="https://i.dawnlab.me/c0268c1e6cfd0863d6ba35be1575941a.png" width="150px"></a><script data-ad-client="ca-pub-2058306854838448" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    </div>
</div><!-- .nexmoe-drawer -->
    </div>
    <div id="nexmoe-content">
        <div class="nexmoe-primary">
            <div class="nexmoe-post">

  <article>
      
          <div class="nexmoe-post-cover" style="padding-bottom: NaN%;"> 
              <img src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fpic3.zhimg.com%2Fv2-cc0f8fa6dd5c3863f5bbb53798adf8e6_r.jpg&refer=http%3A%2F%2Fpic3.zhimg.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1653031848&t=913dacc7a4194a07b1d1c15ca103625b" alt="只需要一个函数就可以完成页面所有的请求？" loading="lazy">
              <h1>只需要一个函数就可以完成页面所有的请求？</h1>
          </div>
      
      
      <div class="nexmoe-post-meta nexmoe-rainbow" style="margin:10px 0!important;">
    <a><i class="nexmoefont icon-calendar-fill"></i>2022年04月20日</a>
</div>

      <h2 id="介绍">介绍</h2>
<p>当你还在为交互函数在项目的各种地方不好维护而烦恼的时候，有没有想过只用一个函数就可以实现对本页面所有请求的执行或绑定。</p>
<h3 id="本项目就旨在实现只写些配置就可以实现所有的交互。">本项目就旨在实现只写些配置就可以实现所有的交互。</h3>
<h2 id="Quick-Start-2">Quick Start</h2>
<h3 id="1-下载代码">1.下载代码</h3>
<pre class="line-numbers language-none"><code class="language-none">$ git clone https:&#x2F;&#x2F;gitee.com&#x2F;pw-1&#x2F;request-all.git<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3 id="2-引入文件">2.引入文件</h3>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> request <span class="token keyword">from</span> <span class="token string">'request.js'</span> <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3 id="3-在组件中使用">3.在组件中使用</h3>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;script&gt;
    import request from &#39;request.js&#39; 
    &#x2F;&#x2F;配置请求的默认配置
    request.MyHeaders.prototype[&#39;Content-Type&#39;] &#x3D; &#39;Application&#x2F;json&#39;
    &#x2F;&#x2F;设置默认content-type
    request.MyHeaders.prototype[&#39;token&#39;] &#x3D; &quot;123123dsasdasdasd&quot;
    &#x2F;&#x2F;设置默认token
    request.AjaxOpt.prototype.baseUrl &#x3D; &quot;http:&#x2F;&#x2F;localhost:3000&#x2F;&quot;
    &#x2F;&#x2F;设置默认基础路径

    export default &#123;
        name:&quot;xxx&quot;,
        method:&#123;
            requestAll:request.requestAll,
        &#125;,
        data:&#123;
            requests:[
                &#123;
                    url:&#39;a&#39;,&#x2F;&#x2F;测试接口a，并打印请求结果
                &#125;,
                &#123;
                    url:&#39;b&#39;,
                    targetData:&#39;now&#39;,&#x2F;&#x2F;请求接口a并吧res中的now放到 data里的now
                &#125;,
                &#123;
                    url:&#39;c&#39;,
                    delay:true,
                    targetData:&#39;ok&#39;,&#x2F;&#x2F;将该请求封装成func绑定到此对象上 &#x2F;&#x2F;调用func this.requests[2].func() 
                    &#x2F;&#x2F;将会使this.ok &#x3D; res.ok
                &#125;
            ],
            now:&#39;&#39;,
            ok:&#39;&#39;,
        &#125;,
        mounted()&#123;
            this.requestAll(this.requests,this);&#x2F;&#x2F;第一个参数是请求配置列表，第二个参数是当前vue组件实力对像
        &#125;
    &#125;

&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="至此你不需要写更多的交互逻">至此你不需要写更多的交互逻</h4>
<h3 id="4-requests-请求配置列表-详解">4.requests 请求配置列表 详解</h3>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token punctuation">&#123;</span>
   <span class="token literal-property property">url</span><span class="token operator">:</span><span class="token string">''</span><span class="token punctuation">,</span><span class="token comment">//必选 接口的路径</span>
   <span class="token literal-property property">method</span><span class="token operator">:</span><span class="token string">''</span><span class="token punctuation">,</span><span class="token comment">//可选，默认get</span>
   <span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token comment">//可选，发送的数据</span>
   <span class="token literal-property property">headers</span><span class="token operator">:</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token comment">//单独设置header, </span>
   <span class="token literal-property property">targetData</span><span class="token operator">:</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">//存放请求结果到的目标数据 vm 的 data 里的属性名</span>
   <span class="token literal-property property">delay</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>	 <span class="token comment">//是否延迟执行这个请求，设置之后在此对象绑定发送该请求的函数</span>
   <span class="token function-variable function">successHandler</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token comment">//成功请求后调用的函数，默认打印请求结果</span>
   <span class="token function-variable function">failHandler</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token comment">// 失败后调用的函数，末日打印 err</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
  </article>

  
      
    <div class="nexmoe-post-copyright">
        <strong>Author：</strong>Peter<br>
        <strong>Link：</strong><a href="http://pe-2.github.io/2022/04/20/requestAll-md/" title="http:&#x2F;&#x2F;pe-2.github.io&#x2F;2022&#x2F;04&#x2F;20&#x2F;requestAll-md&#x2F;" target="_blank" rel="noopener">http:&#x2F;&#x2F;pe-2.github.io&#x2F;2022&#x2F;04&#x2F;20&#x2F;requestAll-md&#x2F;</a><br>
        
            <strong>版权声明：</strong>本文采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/cn/deed.zh" target="_blank">CC BY-NC-SA 3.0 CN</a> 协议进行许可
        
    </div>


  
  
  <div class="nexmoe-post-meta nexmoe-rainbow">
    
    
        <a class="nexmoefont icon-tag-fill -none-link" href="/tags/ajax/" rel="tag">ajax</a>
    
</div>

  
      <div class="nexmoe-post-footer">
          
      </div>
  
</div>
            <div class="nexmoe-post-right">
              <div class="nexmoe-fixed">
                  <div class="nexmoe-tool"> 
                    
                      
                        
                          
                          
                              <button class="mdui-fab catalog" style="overflow:unset;">
                                  <i class="nexmoefont icon-i-catalog"></i>
                                  <div class="nexmoe-toc">
                                      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.</span> <span class="toc-text">介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%AC%E9%A1%B9%E7%9B%AE%E5%B0%B1%E6%97%A8%E5%9C%A8%E5%AE%9E%E7%8E%B0%E5%8F%AA%E5%86%99%E4%BA%9B%E9%85%8D%E7%BD%AE%E5%B0%B1%E5%8F%AF%E4%BB%A5%E5%AE%9E%E7%8E%B0%E6%89%80%E6%9C%89%E7%9A%84%E4%BA%A4%E4%BA%92%E3%80%82"><span class="toc-number">1.1.</span> <span class="toc-text">本项目就旨在实现只写些配置就可以实现所有的交互。</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Quick-Start-2"><span class="toc-number">2.</span> <span class="toc-text">Quick Start</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%B8%8B%E8%BD%BD%E4%BB%A3%E7%A0%81"><span class="toc-number">2.1.</span> <span class="toc-text">1.下载代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%BC%95%E5%85%A5%E6%96%87%E4%BB%B6"><span class="toc-number">2.2.</span> <span class="toc-text">2.引入文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%9C%A8%E7%BB%84%E4%BB%B6%E4%B8%AD%E4%BD%BF%E7%94%A8"><span class="toc-number">2.3.</span> <span class="toc-text">3.在组件中使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%B3%E6%AD%A4%E4%BD%A0%E4%B8%8D%E9%9C%80%E8%A6%81%E5%86%99%E6%9B%B4%E5%A4%9A%E7%9A%84%E4%BA%A4%E4%BA%92%E9%80%BB"><span class="toc-number">2.3.1.</span> <span class="toc-text">至此你不需要写更多的交互逻</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-requests-%E8%AF%B7%E6%B1%82%E9%85%8D%E7%BD%AE%E5%88%97%E8%A1%A8-%E8%AF%A6%E8%A7%A3"><span class="toc-number">2.4.</span> <span class="toc-text">4.requests 请求配置列表 详解</span></a></li></ol></li></ol>
                                  </div>
                              </button>
                          
                          
                      
                    
                      <a href="#nexmoe-content" class="toc-link" aria-label="回到顶部" title="top"><button class="mdui-fab mdui-ripple"><i class="nexmoefont icon-caret-top"></i></button></a>
                  </div>
              </div>
            </div>
        </div>
    </div>
     
    <div id="nexmoe-search-space">
        <div class="search-container">
            <div class="search-header">
                <div class="search-input-container">
                    <input class="search-input" type="text" placeholder="Search" oninput="sinput();">
                </div>
                <a class="search-close" onclick="sclose();">×</a>
            </div>
            <div class="search-body"></div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/mdui@0.4.3/dist/js/mdui.min.js?v=1"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.umd.js"></script>

 

<script async src="/js/app.js?v=1650446891736"></script>


	<script async src="/js/search.js?v=1650446891736"></script>


<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js"></script>
<script>
	$(".justified-gallery").justifiedGallery({
		rowHeight: 160,
		margins: 10,
	});
</script>


    





</body>

</html>
